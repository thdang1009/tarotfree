---
import Layout from '../layouts/Layout.astro';
import { detectLanguage, createTranslator } from '../utils/i18nServer';
import { loadSpreads } from '../utils/loadData';
import { withLang } from '../utils/linkHelper';

// Detect language
const lang = detectLanguage(Astro.request);

// Load language-specific data
const spreads = loadSpreads(lang);

// Create translator for this page
const t = createTranslator(lang, 'common');
---

<Layout title="Free Tarot Readings">
  <div class="container mx-auto px-4 py-12">
    <!-- Hero Section -->
    <div class="text-center mb-16">
      <h1 class="text-5xl md:text-6xl font-bold mb-4 text-violet-deep">
        Tarot by the Stars
      </h1>
      <p class="text-xl text-gray-600 mb-8">
        {t('footer.tagline')}
      </p>

      <div class="max-w-2xl mx-auto">
        <h2 class="text-2xl font-heading mb-6 text-violet-medium">
          {t('labels.whatGuidanceToday')}
        </h2>

        <!-- Suggested Topics -->
        <div class="flex flex-wrap justify-center gap-4 mb-12">
          <a href={withLang('/reading/5-card-relationship', lang)} class="px-6 py-3 bg-white border-2 border-violet-light rounded-full hover:bg-violet-light hover:text-white transition-all card-hover">
            ‚ù§Ô∏è {t('topics.love')}
          </a>
          <a href={withLang('/reading/10-card-career', lang)} class="px-6 py-3 bg-white border-2 border-violet-light rounded-full hover:bg-violet-light hover:text-white transition-all card-hover">
            üíº {t('topics.career')}
          </a>
          <a href={withLang('/reading/5-card-health', lang)} class="px-6 py-3 bg-white border-2 border-violet-light rounded-full hover:bg-violet-light hover:text-white transition-all card-hover">
            üè• {t('topics.health')}
          </a>
          <a href={withLang('/reading/1-card', lang)} class="px-6 py-3 bg-white border-2 border-violet-light rounded-full hover:bg-violet-light hover:text-white transition-all card-hover">
            ‚òÄÔ∏è {t('topics.dailyCard')}
          </a>
        </div>
      </div>
    </div>

    <!-- Spread Selection -->
    <div class="max-w-4xl mx-auto">
      <h2 class="text-3xl font-heading text-center mb-8 text-violet-deep">
        {t('labels.chooseYourSpread')}
      </h2>

      <div class="grid md:grid-cols-3 gap-6">
        {spreads.map((spread) => (
          <a
            href={withLang(`/reading/${spread.id}`, lang)}
            class="bg-white rounded-lg p-6 shadow-lg card-hover border-2 border-transparent hover:border-gold-soft block"
          >
            <div class="text-center mb-4">
              <div class="text-4xl font-bold text-gold-soft mb-2">
                {spread.cardCount}
              </div>
              <h3 class="text-xl font-heading text-violet-deep mb-2">
                {spread.name}
              </h3>
              <p class="text-gray-600 text-sm">
                {spread.description}
              </p>
            </div>

            <div class="border-t pt-4">
              <div class="w-full bg-violet-deep text-white py-2 rounded-lg hover:bg-violet-medium transition-colors text-center">
                {t('buttons.startReading')}
              </div>
            </div>
          </a>
        ))}
      </div>
    </div>

    <!-- Decorative Element -->
    <div class="text-center mt-16 text-gray-400">
      <p class="italic">
        "{t('messages.tarotQuote')}"
      </p>
    </div>
  </div>
</Layout>

<style>
  @keyframes float {
    0%, 100% {
      transform: translateY(0px);
    }
    50% {
      transform: translateY(-10px);
    }
  }

  .float-animation {
    animation: float 3s ease-in-out infinite;
  }
</style>
